<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cowork.employee.survey.model.mapper.SurveyMapper"> 


<select id="positionList">
	SELECT POSITION_NM FROM POSITION 
	WHERE COM_NO = #{comNo}
</select>

<select id="empList">
	SELECT E.*, T.TEAM_NM
	FROM EMPLOYEE E
	LEFT JOIN TEAM T ON (T.TEAM_NO = E.TEAM_NO)
	WHERE E.COM_NO = #{comNo}
	AND  CONCAT(E.EMP_LAST_NAME, E.EMP_FIRST_NAME) LIKE '%' || #{empNickname} || '%'
</select>

<select id="surveyNoDetail">
	SELECT SEQ_SURVEY.NEXTVAL FROM DUAL
</select>

<insert id="insertSurvey">
	INSERT INTO SURVEY
	VALUES (#{surveyNo},  #{empCode}, #{title},  #{surveyStartDate}, #{surveyEndDate}, #{surveyEntireTargetFl})
</insert>

<select id="specificPositionEmpList"> 
	SELECT E.EMP_CODE 
	FROM POSITION P 
	LEFT JOIN EMPLOYEE E ON (P.POSITION_NO = E.POSITION_NO)
	WHERE P.POSITION_NM = #{position}
	AND P.COM_NO = #{comNo}
</select>

<insert id="insertSurveyTarget">
	INSERT INTO SURVEY_TARGET
	VALUES (SEQ_SURVEY_TARGET.NEXTVAL,  #{EmpCode2}, #{surveyNo})
</insert>

<select id="findNextSequenceVal">
	SELECT SEQ_SURVEY_SUB.NEXTVAL FROM DUAL 
</select>

<insert id="insertSurveySub">
 INSERT INTO SURVEY_SUB VALUES 
 (#{surveySubNo}, #{surveyNo}, #{surveySubTitle}, #{questionType})
</insert>
	
</mapper>






























